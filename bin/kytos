#!/usr/bin/env python3
# This file is part of kytos-utils.
#
# Copyright (c) 2016 by Kytos Team.
#
# Authors:
#    Beraldo Leal <beraldo AT ncc DOT unesp DOT br>
#
# kytos-utils is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# kytos-utils is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Foobar.  If not, see <http://www.gnu.org/licenses/>.
#
"""kytos - The kytos command line.

Usage: kytos [-c <file>|--config <file>] <command> [<args>...]
       kytos [-v|--version]
       kytos [-h|--help]

Options:
  -c <file>, --config <file>    Load config file [default: ~/.kytosrc]
  -h, --help                    Show this screen.
  -v, --version                 Show version.

The most commonly used kytos commands are:
   napps      Create, list, enable, install (and other actions) NApps.
   server     Start, Stop your Kytos Controller (Kyco)

See 'kytos <command> -h|--help' for more information on a specific command.
"""
import sys

from docopt import docopt


def use_new_code():
    return len(sys.argv) > 2 and sys.argv[1] == 'napps' and sys.argv[2] in \
        ('enable', 'disable', 'list', 'uninstall')


if __name__ == '__main__':
    if use_new_code():
        args = docopt(__doc__,
                      version='kytos command line, version 0.1.0',
                      options_first=True)
        command = args['<command>']
        command_args = args['<args>']
        argv = [command] + command_args

        if command == 'napps':
            from kytos.cli.commands.napps.parser import parse
            parse(argv)
        else:
            print("Error: Invalid syntax")
            exit(__doc__)
    else:
        from kytos_utils.napps.remote.main import main
        main()
